
üîªüîªüîªüîªüîªüîªüîªüîªüîªüîªüîªüîªüîªüîªüîªüîªüîªüîªüîªüîªüîªüîªüîªüîªüîªüîªüîª
# ‚úçÔ∏è Proof of Concept ArgoCD
üî∫üî∫üî∫üî∫üî∫üî∫üî∫üî∫üî∫üî∫üî∫üî∫üî∫üî∫üî∫üî∫üî∫üî∫üî∫üî∫üî∫üî∫üî∫üî∫üî∫üî∫üî∫


`üéØ –¶—ñ–ª—å:`–î–æ–≤–µ—Å—Ç–∏ —Ç–µ—Ö–Ω—ñ—á–Ω—É —á–∏ –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω—É –∂–∏—Ç—Ç—î–∑–¥–∞—Ç–Ω—ñ—Å—Ç—å —ñ–¥–µ—ó —Ç–∞ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è ArgoCD –≤ —è–∫–æ—Å—Ç—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—É CD. –î–æ–∫–∞–∂–∏–º–æ, —â–æ —î —Ç–µ—Ö–Ω—ñ—á–Ω–æ –º–æ–∂–ª–∏–≤–∏–º —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —ñ–¥–µ—é.
–î–æ–≤–µ—Å—Ç–∏
`ü§î –°—É—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó:` –ù–∞ —Ü—å–æ–º—É –µ—Ç–∞–ø—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –º–æ–∂–µ –º—ñ—Å—Ç–∏—Ç–∏ –æ–ø–∏—Å –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó, –∞–Ω–∞–ª—ñ–∑ —Ç–µ—Ö–Ω—ñ—á–Ω–∏—Ö –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π, –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –æ–±—Ä–∞–Ω–æ–≥–æ —Å—Ç–µ–∫—É —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ–π, –∫–æ—Ä–æ—Ç–∫–∏–π –ø–ª–∞–Ω –≤–∏–∫–æ–Ω–∞–Ω–Ω—è, —Ç–µ—Ö–Ω—ñ—á–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó —Ç–∞ –º–µ—Ç—Ä–∏–∫–∏ —É—Å–ø—ñ—Ö—É PoC.

–í —Ü—å–æ–º—É —Ä–æ–∑–¥—ñ–ª—ñ –±—É–¥–µ —Ä–æ–∑–≥–ª—è–Ω—É—Ç–æ –Ω–∏–∑–∫–∞ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ –¥–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤ –±—É–¥—å —è–∫–æ—ó —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ. –ü–æ—á–Ω–µ–º–æ –∑ –ø—ñ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ–≥–æ [—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é](https://github.com/Endorrfin) —Ç–∞ –Ω–∞–ø–∏—à–µ–º–æ —Ç—Ä–æ—Ö–∏ –∫–æ–¥—É –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó –≤—Å—å–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É `CI` –≤—ñ–¥ –±—ñ–ª–¥–∞ –¥–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—É. –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –±—É–¥—É—Ç—å —â–µ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ –¥–ª—è –µ—Ç–∞–ø—É `CD`

Delivery –º–∏ –æ—Ä–≥–∞–Ω—ñ–∑—É—î–º–æ –∑–∞ –º–æ–¥–µ–ª–ª—é `pull` –∞–±–æ –≤—Ç—è–≥—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω –∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é. –í–∏–±–µ—Ä–µ–º–æ –ø—ñ–¥—Ö—ñ–¥ "one application - one cluster", –º–∞—î—Ç—å—Å—è –Ω–∞ —É–≤–∞–∑—ñ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É –±—É–¥–µ –≤–∑—è—Ç–∏–π –æ–¥–∏–Ω –æ–∫—Ä–µ–º–∏–π –∫–ª–∞—Å—Ç–µ—Ä. –ó —Ü—ñ—î—é –º–µ—Ç–æ—é –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î–º–æ "single host kubernetes cluster" –ê –≤ —è–∫–æ—Å—Ç—ñ —Å–∏—Å—Ç–µ–º–∏ Delivery —Ç–∞ Deploy –Ω–∞ —Ç–µ—Å—Ç–æ–≤–µ –æ—Ç–æ—á–µ–Ω–Ω—è –≤–∏–±–µ—Ä–µ–º–æ [ArgoCD](https://argo-cd.readthedocs.io/en/stable/).

![ArgoCD](https://argo-cd.readthedocs.io/en/stable/assets/argocd-ui.gif)

`ArgoCD` —Ä–µ–∞–ª—ñ–∑—É—î –ø—ñ–¥—Ö—ñ–¥ GitOps –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π Git —è–∫ –¥–∂–µ—Ä–µ–ª–æ —ñ—Å—Ç–∏–Ω–∏ –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –±–∞–∂–∞–Ω–æ–≥–æ —Å—Ç–∞–Ω—É –ø—Ä–æ–≥—Ä–∞–º–∏. –ú–∞–Ω—ñ—Ñ–µ—Å—Ç–∏ Kubernetes –º–æ–∂–Ω–∞ –≤–∫–∞–∑—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫–æ–º–∞ —Å–ø–æ—Å–æ–±–∞–º–∏:  
- [kustomize](https://kustomize.io/) applications  
- [helm](https://helm.sh/) charts
- [jsonnet](https://jsonnet.org/) files
- Plain directory of YAML/json manifests  

`‚ùóÔ∏è ArgoCD`- —Ü–µ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä Kubernetes —è–∫–∏–π –±–µ–∑–ø–µ—Ä–µ—Ä–≤–Ω–æ –≤—ñ–¥—Å—Ç–µ–∂—É—î ranning app and comparing current state with wishes. –î–µ–ø–ª–æ–π–º–µ–Ω—Ç –ø–æ—Ç–æ—á–Ω—ñ–π —Å—Ç–∞–Ω —è–∫–æ–≥–æ –≤—ñ–¥—Ä—ñ–∑–Ω—è—î—Ç—å—Å—è –≤—ñ–¥ —Ü—ñ–ª—å–æ–≤–æ–≥–æ –≤–≤–∞–∂–∞—î—Ç—å—Å—è `out of sync` ArgoCD —ñ–Ω—Ñ–æ—Ä–º—É—î —Ç–∞ –≤—ñ–∑—É–∞–ª—ñ–∑—É—î –≤—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç—ñ –Ω–∞–¥–∞—é—á–∏ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó –∞–±–æ —Ä—É—á–Ω–æ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –±–∞–∂–∞–Ω–æ–≥–æ —Å—Ç–∞–Ω—É. 

1Ô∏è‚É£ –ü—ñ–¥–≥–æ—Ç—É—î–º–æ –≤ –æ–∫—Ä–µ–º–∏–π –ª–æ–∫–∞–ª—å–Ω–∏–π –∫–ª–∞—Å—Ç–µ—Ä –¥–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è ArgoCD. –ù–∞–ª–∞—à—Ç—É—î–º–æ –π–æ–≥–æ:
```bash
$ k3d cluster create argo
... 
INFO[0029] Cluster 'argo' created successfully!         
INFO[0029] You can now use it like this: kubectl cluster-info

$ kubectl cluster-info
Kubernetes control plane is running at https://0.0.0.0:43297
CoreDNS is running at https://0.0.0.0:43297/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy
Metrics-server is running at https://0.0.0.0:43297/api/v1/namespaces/kube-system/services/https:metrics-server:https/proxy

$ k version
$ k get all -A
```
2Ô∏è‚É£ –Ü–Ω—Å—Ç–∞–ª—è—Ü—ñ—è ‚åõÔ∏è
ArgoCD –º–æ–∂–Ω–∞ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `Helm`, –∞–ª–µ –∑–∞—Ä–∞–∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î–º–æ —Å–∫—Ä–∏–ø—Ç –∑ –æ—Ñ—ñ—Ü—ñ–π–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é [ArgoCD](https://argo-cd.readthedocs.io/en/stable/#quick-start) –°–ø–æ—á–∞—Ç–∫—É —Å—Ç–≤–æ—Ä–∏–º–æ –Ω–µ–π–º—Å–ø–µ–π—Å –≤ —è–∫–æ–º—É –±—É–¥–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —Å–∏—Å—Ç–µ–º—É, –ø–æ—Ç—ñ–º —Å–∫–æ—Ä–∏—Å—Ç–∞—î–º–æ—Å—å —Å–∫—Ä–∏–ø—Ç–æ–º (–º–∞–Ω—ñ—Ñ–µ—Å—Ç–æ–º) –¥–ª—è —ñ–Ω—Å—Ç–∞–ª—è—Ü—ñ—ó —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∏–º–æ —Å—Ç–∞–Ω —Å–∏—Å—Ç–µ–º–∏ –ø—ñ—Å–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è:     
```bash
$ kubectl create namespace argocd
namespace/argocd created

$ k get ns
NAME              STATUS   AGE
kube-system       Active   80m
default           Active   80m
kube-public       Active   80m
kube-node-lease   Active   80m
argocd            Active   28s

$ kubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml

$ k get all -n argocd

# –ø–µ—Ä–µ–≤—ñ—Ä–∏–º–æ —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤: 
$ k get pod -n argocd -w
NAME                                                READY   STATUS    RESTARTS   AGE
argocd-redis-b5d6bf5f5-sqlgw                        1/1     Running   0          3m41s
argocd-notifications-controller-589b479947-fm4kp    1/1     Running   0          3m41s
argocd-applicationset-controller-6f9d6cfd58-9rvjf   1/1     Running   0          3m41s
argocd-dex-server-6df5d4f8c4-nd829                  1/1     Running   0          3m41s
argocd-application-controller-0                     1/1     Running   0          3m40s
argocd-server-7459448d56-xnrvf                      1/1     Running   0          3m40s
argocd-repo-server-7b75b45897-qsw9z                 1/1     Running   0          3m41s
```
3Ô∏è‚É£ –û—Ç—Ä–∏–º–∞—î–º–æ –¥–æ—Å—Ç—É–ø –¥–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É ArgoCD GUI üîì
[–û—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø](https://argo-cd.readthedocs.io/en/stable/getting_started/#3-access-the-argo-cd-api-server) –º–æ–∂–Ω–∞ –≤ 3 —à–ª—è—Ö–∏:  
- Service Type Load Balancer  
- Ingress  
- Port Forwarding 

–°–∫–æ—Ä–∏—Å—Ç–∞—î–º–æ—Å—å `Port Forwarding` –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä—Ç–∞ 8080. –í –∫–æ–º–∞–Ω–¥—ñ –º–∏ –ø–æ—Å–∏–ª–∞—î–º–æ—Å—å –Ω–∞ —Å–µ—Ä–≤—ñ—Å `svc/argocd-server` —è–∫–∏–π –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ namespace `-n argocd`. Kubectl –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–Ω–∞–π–¥–µ endpoint —Å–µ—Ä–≤—ñ—Å—É —Ç–∞ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü—ñ—é –ø–æ—Ä—Ç—ñ–≤ –∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä—Ç—É 8080 –Ω–∞ –≤—ñ–¥–¥–∞–ª–µ–Ω–∏–π 443 
```bash
$ kubectl port-forward svc/argocd-server -n argocd 8080:443&
[1] 23820
Forwarding from 127.0.0.1:8080 -> 8080
Forwarding from [::1]:8080 -> 8080
Handling connection for 8080
```
ArgoCD –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –ø—Ä–∞—Ü—é—î –∑ https —Ç–æ–º—É –ø—Ä–∏ —Å–ø—Ä–æ–±—ñ –≤—ñ–¥–∫—Ä–∏—Ç–∏ [127.0.0.1:8080](https://127.0.0.1:8080/) –º–∏ –æ—Ç—Ä–∏–º–∞—î–º–æ –ø–æ–º–∏–ª–∫—É —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏. –û—Ç–∂–µ –≤ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ–π —Å–∏—Å—Ç–µ–º—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞—Ç–∏ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ —Ç–∞ –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞—Ç–∏ —Ü—ñ –º–æ–º–µ–Ω—Ç–∏. 

4Ô∏è‚É£ –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—é üîê
–í–∏–∫–æ—Ä–∏—Å—Ç–∞—î–º–æ –∫–æ–º–∞–Ω–¥—É –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—é, –≤–∫–∞–∂–µ–º–æ —Ñ–∞–π–ª —Å—ñ–∫—Ä–µ—Ç—É `argocd-initial-admin-secret` –∞ —Ç–∞–∫–æ–∂ —Ñ–æ—Ä–º–∞—Ç  –≤–∏–≤–æ–¥—É `jsonpath="{.data.password}"`. –¶–µ –ø–æ–≤–µ—Ä–Ω–µ –Ω–∞–º base64 –∑–∞–∫–æ–¥–æ–≤–∞–Ω–∏–π –ø–∞—Ä–æ–ª—å, –ø—ñ—Å–ª—è —á–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î–º–æ –∫–æ–º–∞–Ω–¥—É `base64 -d` –¥–ª—è –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é –≤ –ø—Ä–æ—Å—Ç–∏–π —Ç–µ–∫—Å—Ç. –û—Ç—Ä–∏–º–∞–Ω–∏–π –ø–∞—Ä–æ–ª—å —Ç–∞ –ª–æ–≥—ñ–Ω `admin` –≤–≤–æ–¥–∏–º–æ –≤ Web-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å ArgoCD   
```bash
$ k -n argocd get secret argocd-initial-admin-secret -o jsonpath="{.data.password}"
cFZIWTM3eFpJR3hDeUxLNQ==#                                                                                                        
$ k -n argocd get secret argocd-initial-admin-secret -o jsonpath="{.data.password}"|base64 -d;echo
pVHY37xZIGxCyLK5
```
5Ô∏è‚É£ –°—Ç–≤–æ—Ä–∏–º–æ –¥–æ–¥–∞—Ç–æ–∫ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –≥—Ä–∞—Ñ—ñ—á–Ω–æ–≥–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É.
–¢–µ–ø–µ—Ä –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ –≤ ArgoCD –¥–æ–¥–∞—Ç–∫–∏ –±—É–¥—É—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞—Ç–∏—Å—å –Ω–∞ –æ–Ω–æ–≤–ª—è—Ç–∏—Å—å –≤ Kubernetes. 
- –ù–∞—Ç–∏—Å–∫–∞—î–º–æ `‚ûï NEW APP` 
- –í–≤–æ–¥–∏–º–æ —ñ–º'—è –¥–æ–¥–∞—Ç–∫—É `demo`
- –ü—Ä–æ–µ–∫—Ç –¥–æ —è–∫–æ–≥–æ –Ω–∞–ª–µ–∂–∏—Ç—å –¥–æ–¥–∞—Ç–æ–∫ –æ–±–µ—Ä–µ–º–æ `–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º`
- –¢–∏–ø —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –∑–∞–ª–∏—à–∞—î–º–æ `Manual`
![‚ûï NEW APP](.media/agro_newapp.png)  
- –£ —Ä–æ–∑–¥—ñ–ª—ñ `SOURCE` —Ç–∏–ø –¥–∂–µ—Ä–µ–ª–∞ –∑–∞–ª–∏—à–∞—î–º–æ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `GIT`
- –í–≤–µ–¥–µ–º–æ `url` —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é, —è–∫–∏–π –º—ñ—Å—Ç–∏—Ç—å –º–∞–Ω—ñ—Ñ–µ—Å—Ç–∏ –¥–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è https://github.com/Endorrfin/go-demo-app (—Ü–µ –±—É–¥–µ helm charts, –∞–±–æ –ø–∞–∫–µ—Ç –º–∞–Ω—ñ—Ñ–µ—Å—Ç—ñ–≤ —è–∫–∏–π —è–≤–ª—è—î —Å–æ–±–æ—é –≥—Ä—É–ø—É –æ–±'—î–∫—Ç—ñ–≤ –¥–ª—è Kubernetes —Ç–∞ –Ω–∞—à–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É)
- –£ –ø–æ–ª—ñ `Path` –≤–≤–µ–¥–µ–º–æ —à–ª—è—Ö –¥–æ –∫–∞—Ç–∞–ª–æ–≥—É `helm`  
![helm](.media/argo_helm.png)  
- –í —Ä–æ–∑–¥—ñ–ª—ñ `DESTINATION` –≤–∫–∞–∂–µ–º–æ `url` –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä—É —Ç–∞ `Namespace` demo –ø—ñ—Å–ª—è —á–æ–≥–æ ArgoCD –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –¥–æ–¥–∞—Ç–∫—É –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–≤—à–∏ –º–∞–Ω—ñ—Ñ–µ—Å—Ç–∏, —è–∫—ñ –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó. –í —Ä–∞–∑—ñ –±–∞–∂–∞–Ω–Ω—è –∑–º—ñ–Ω–∏—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –≤—Ä—É—á–Ω—É –º–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ —ñ—Ö –∑–Ω–∞—á–µ–Ω–Ω—è –≤ —Ä–æ–∑–¥—ñ–ª—ñ `PARAMETERS`.  
![DESTINATION](.media/argo_dest.png)  
- –£ —Ä–æ–∑–¥—ñ–ª—ñ –ø–æ–ª—ñ—Ç–∏–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –≤–∫–∞–∂–µ–º–æ —è–∫ –¥–æ–¥–∞—Ç–æ–∫ –±—É–¥–µ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏—Å—å –∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—î–º. –¢—É—Ç –≤–∞–∂–ª–∏–≤–æ –≤–∫–∞–∑–∞—Ç–∏ ArgoCD —â–æ–± —Å—Ç–≤–æ—Ä–∏–≤ –Ω–æ–≤–∏–π namespace —Ç–∞–∫ —è–∫ –≤ helm —Ü—é —Ñ—É–Ω–∫—Ü—ñ—é –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –ø—Ä–∏–±—Ä–∞–ª–∏. –°—Ç–∞–≤–∏–º–æ –≥–∞–ª–∫—É –Ω–∞–ø—Ä–æ—Ç–∏ `AUTO-CREATE NAMESPACE`   
- –°—Ç–≤–æ—Ä—é—î–º–æ –¥–æ–¥–∞—Ç–æ–∫ –∫–Ω–æ–ø–∫–æ—é `CREATE`  
![CREATE](.media/argo_create.png)  

6Ô∏è‚É£ –ü–µ—Ä–µ–≥–ª—è–Ω–µ–º–æ –¥–µ—Ç–∞–ª—ñ —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É –Ω–∞—Ç–∏—Å–Ω—É–≤—à–∏ –Ω–∞ –Ω—å–æ–≥–æ –≤ —Å–ø–∏—Å–∫—É.  
–ì—Ä–∞—Ñ—ñ—á–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–∞—î —ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω–µ —É—è–≤–ª–µ–Ω–Ω—è –ø—Ä–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º–∏, —ó—Ö —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è —Ç–∞ –ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω —É –∫–ª–∞—Å—Ç–µ—Ä—ñ. 

![NODES](.media/ArgoCD.gif)  

7Ô∏è‚É£ –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –¥–æ–¥–∞—Ç–∫—É 
üîπ –î–ª—è —Ü—å–æ–≥–æ —É –≤—ñ–∫–Ω—ñ –≤—ñ–¥–æ–º–æ—Å—Ç–µ–π –ø—Ä–æ –ø—Ä–æ–≥—Ä–∞–º—É –Ω–∞—Ç–∏—Å–∫–∞—î–º–æ –∫–Ω–æ–ø–∫—É `SYNC` 
üîπ –ü—Ä–∞–≤–æ—Ä—É—á –≤–∏—Å–∫–∞–∫—É—î –≤—ñ–∫–Ω–æ –≤ —è–∫–æ–º—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ–±—Ä–∞—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Ç–∞ —Ä–µ–∂–∏–º–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó —Ç–∞ –Ω–∞—Ç–∏—Å–Ω—É—Ç–∏ –∫–Ω–æ–ø–∫—É `SYNCHRONIZE`  
üîπ –ü—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—É –º–æ–∂–µ–º–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –ø—Ä–æ–≥—Ä–∞–º–∏, –ø–µ—Ä–µ–≤—ñ—Ä–∏–≤—à–∏ —ó—ó —Å—Ç–∞—Ç—É—Å —É –∫–ª–∞—Å—Ç–µ—Ä—ñ:  

![SYNCHRONIZE](.media/argo_status.png)

8Ô∏è‚É£ –í—ñ–¥—Å–ª—ñ–¥–∫—É—î–º–æ –∑–∞ —Ä–µ–∞–∫—Ü—ñ—î—é ArgoCD –Ω–∞ –∑–º—ñ–Ω–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é.
- ‚úÖ –ó–º—ñ–Ω–∏–º–æ –≤ —Ñ–∞–π–ª—ñ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é https://github.com/Endorrfin/go-demo-app/blob/master/helm/values.yaml —Ç–∏–ø —à–ª—é–∑—É –∑ `NodePort` –Ω–∞ `LoadBalancer` (–æ—Å—Ç–∞–Ω–Ω—ñ–π —Ä—è–¥–æ–∫ —Ñ–∞–π–ª—É)  

![out of sync](.media/argo_outofsync.png)

```bath
$ k get svc -n demo
NAME               TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)                                                 AGE
demo-nats          ClusterIP   None            <none>        4222/TCP,6222/TCP,8222/TCP,7777/TCP,7422/TCP,7522/TCP   31m
demo-front         ClusterIP   10.43.247.92    <none>        80/TCP                                                  31m
cache              ClusterIP   10.43.234.48    <none>        6379/TCP                                                31m
ambassador         NodePort    10.43.190.212   <none>        80:30092/TCP                                            31m
```
- ‚úÖ –í–∏–∫–ª–∏–∫–∞–Ω–∏–π –ø—Ä–æ—Ü–µ—Å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –æ—Ç—Ä–∏–º–∞—î –æ—Å—Ç–∞–Ω–Ω—é –≤–µ—Ä—Å—ñ—é —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é –≥—ñ—Ç —Ç–∞ –ø–æ—Ä—ñ–≤–Ω—è—î —ó—ó —ñ–∑ current state. –¢–∞–∫–∏–º —á–∏–Ω–æ–º –±–∞—á–∏–º–æ —â–æ —Ç–∏–ø —Å–µ—Ä–≤—ñ—Å—É –¥–ª—è ambassador –∑–º—ñ–Ω–∏–≤—Å—è –∑ NodePort –Ω–∞ LoadBalancer —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –±—É–≤ –æ–Ω–æ–≤–ª–µ–Ω–∏–π –º–∞–Ω—ñ—Ñ–µ—Å—Ç Kubernetes
```bath
$ NAME               TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)             AGE
ambassador         LoadBalancer   10.43.190.212   <pending>     80:30092/TCP          35m
```